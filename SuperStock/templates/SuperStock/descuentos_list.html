{% extends 'SuperStock/base.html' %}

{% block content %}
    <div>
        <ul class="nav nav-tabs">
            <li class="nav-item">
              <a class="nav-link active bg-success" aria-current="page" href="{% url 'descuentos_list' %}">Lista</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'descuentos_new' %}">Agregar</a>
            </li>
        </ul>                
        <h3>Tabla de descuentos</h3>

        <form method="post" action="{% url 'descuentos_list' %}">
            {% csrf_token %}
                <div style="display: flex; justify-content: space-between; margin-right: 5%;">
                    <div>
                        <label for="id_descuentos">ID</label><br>
                        <input type="number" id="id_descuentos" name="id_descuentos" value="" placeholder="Buscar...">
                    </div>

                    <div>
                        <label for="categoria">Categorias</label><br>
                        <select name="categoria">
                            <option value="">Todos</option>
                            {% for categorie in categories %}
                                <option value="{{ categorie.categorias }}">{{ categorie.categorias }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div>
                        <label for="producto">Productos</label><br>
                        <select name="producto">
                            <option value="">Todos</option>
                            {% for producte in producte %}
                                <option value="{{ producte.nombreP }}">{{ producte.nombreP }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    
                    <div>
                        <label for="tipos">Tipo de Descuento</label><br>
                        <select name="tipos">
                            <option value="">Todos</option>
                            {% for descuento in descuentosT %}
                                <option value="{{ descuento.tipo }}">{{ descuento.tipo }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div>
                        <label for="in_active">Activo?</label><br>
                        <label for="si">si</label>
                        <input type="checkbox" id="si" name="in_active" value="si"><br>
                        <label for="no">no</label>
                        <input type="checkbox" id="no" name="in_active" value="no">
                    </div>

                    <div>
                        <input type="submit" class="buttonUwu" value="Aplicar filtros">
                        <button type="button" class="buttonUwu" style="margin-top: 10px;"><a href="{% url 'descuentos_list' %}">Resetear</a></button>
                    </div>
                </div>
        </form>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Productos</th>
                    <th scope="col">Tipo</th>
                    <th scope="col">Valor</th>
                    <th scope="col">Fecha de Inicio</th>
                    <th scope="col">Fecha de Fin</th>
                    <th scope="col">Descripcion</th>
                    <th scope="col">Estado</th>
                    <th scope="col">Acciones</th>
                </tr>
            </thead>
                {% for descuento in descuentos %}
                    <tbody>
                        <tr>
                            <td scope="row"><a href="{% url 'descuentos_detail' pk=descuento.id_descuentos %}">{{ descuento.id_descuentos }}</a></td>
                            <td>{{ descuento.id_productos }}</td>
                            <td>{{ descuento.descuento_tipo }}</td>
                            <td>{{ descuento.descuento_tipo.porcentaje }}%</td>
                            <td>{{ descuento.fecha_inicio|date:"d-m-Y" }}</td>
                            <td>{{ descuento.fecha_fin|date:"d-m-Y" }}</td>
                            <td>{{ descuento.descripcion }}</td>
                            <td>{% if descuento.in_active == True %}activo{% else %}inactivo{% endif %}</td>
                            <td><button type="button" class="buttonUwu"><a href="{% url 'descuentos_edit' pk=descuento.id_descuentos %}">Edit</a></button>
                                {% if descuento.in_active == True %}<button type="button" class="buttonUwuu"><a href="{% url 'descuentos_delete' pk=descuento.id_descuentos %}">Borrar</a></button>{% else %}
                                <button type="button" class="buttonUwuuu"><a href="{% url 'descuentos_restore' pk=descuento.id_descuentos %}">Restaurar</a></button>{% endif %}
                            </td>
                        </tr>
                    </tbody>
                {% endfor %}
        </table>
    </div>
{% endblock %}